% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/proportion.R
\name{proportion}
\alias{proportion}
\title{Generic Method for proportion Analysis}
\usage{
proportion(
  fitted_model,
  numerator_combination = NULL,
  denominator_combination = NULL,
  ...
)
}
\arguments{
\item{fitted_model}{Fitted model object with class \code{EpiStrainDynamics.fit}
with \code{multiple} or \code{subtyped} pathogen structure.}

\item{numerator_combination}{Named pathogens or subtypes to be included in
proportion numerator, or NULL. If NULL, it will use each pathogen.}

\item{denominator_combination}{Named pathogens or subtypes to be included in
proportion denominator, or NULL. If NULL, it will use all pathogens.}

\item{...}{Additional arguments passed to metrics calculation}
}
\value{
named list of class \code{EpiStrainDynamics.metric} containing a dataframe
of the calculated metric outcome (\verb{$measure}), the fit object (\verb{$fit}), and the
constructed model object (\verb{$constructed_model}). The \code{measure} data frame
contains the median of the epidemiological quantity (\code{y}), the 50\% credible
interval of the quantity (\code{lb_50} & \code{ub_50}), the 95\% credible interval
(\code{lb_95} & \code{ub_95}), the proportion greater than a defined threshold value
(\code{prop}), the pathogen name (\code{pathogen}), and the time label (\code{time}).
}
\description{
Computes epidemiological proportion, defined as the relative fraction of
cases attributable to specific pathogen(s) or strain(s) at a given time point,
calculated as the ratio of incidence from selected pathogen(s) to a
reference group:
\deqn{P_t = \frac{I_{\text{numerator}}(t)}{I_{\text{denominator}}(t)}}
}
\details{
Where incidences are derived from the exponential of log-incidence estimates:
\deqn{P_t = \frac{\sum_{i \in \text{numerator}} \exp(\log\text{-incidence}_{i,t})}{\sum_{j \in \text{denominator}} \exp(\log\text{-incidence}_{j,t})}}

This metric quantifies the \strong{relative contribution} of specific pathogen(s)
or strain(s) to the total disease burden. Key characteristics:
\itemize{
\item Values between 0 and 1 (\eqn{0 \leq P_t \leq 1}) when denominator
includes numerator components
\item Values can exceed 1 (\eqn{P_t > 1}) when denominator excludes
numerator components
\item Represents the fractional share of cases at each time point
\item Time-varying to capture changing pathogen/strain dynamics
}

\strong{Flexible combinations}:
\itemize{
\item Individual proportions: Each pathogen relative to all pathogens
(default)
\item Custom numerator: Specific pathogen(s) of interest (e.g., variant
of concern)
\item Custom denominator: Either 'all' pathogens or a specified subset
\item Subset comparisons: Compare specific groups (e.g., Alpha vs.
Delta + Omicron)
}

This metric function can be run directly on the fitted model output.
}
\examples{
\dontrun{
  mod <- construct_model(
    method = p_spline(),
    pathogen_structure = multiple(
      case_timeseries = sarscov2$cases,
      time = sarscov2$date,
      component_pathogen_timeseries = list(
        alpha = sarscov2$alpha,
        delta = sarscov2$delta,
        omicron = sarscov2$omicron,
        other = sarscov2$other))
  )

  fit <- fit_model(mod)
  prop <- proportion(fit)

  # or a unique combination, compared to all pathogens
  prop2 <- proportion(fit,
    numerator_combination = c('alpha', 'delta', 'omicron')
  )

  # or a user-specified combination in both numerator and denominator
  prop3 <- proportion(fit,
    numerator_combination = 'alpha',
    denominator_combination = c('alpha', 'delta', 'omicron')
  )
}
}
\seealso{
Other metrics: 
\code{\link{Rt}()},
\code{\link{growth_rate}()},
\code{\link{incidence}()}
}
\concept{metrics}
